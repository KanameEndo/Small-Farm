<!DOCTYPE html>
<html>
  <head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>内山農園 in 細江</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
  </head>

  <body>
    <header id="header">
      <h1></h1>
        <nav id="g-navi">
          <ul>
            <% if user_signed_in? %>
            <li><%= link_to "マイページ", users_show_path %></li>
            <li><%= link_to "ログアウト", destroy_user_session_path, method: :delete %></li>
            <li><%= link_to '内山農園について', others_path %></li>
            <li><%= link_to 'お問い合わせ', new_contact_path %></li>
              <% else %>
              <li><%= link_to "新規登録", new_user_registration_path %></li>
              <li><%= link_to "ログイン", new_user_session_path %></li>
              <li><%= link_to 'ゲストログイン（閲覧用）', users_guest_sign_in_path, method: :post %></li>
              <li><%= link_to '管理者ログイン（閲覧用）', users_admin_sign_in_path, method: :post %></li>
              <li><%= link_to '内山農園について', others_path %></li>
              <li><%= link_to 'お問い合わせ', new_contact_path %></li>
            <% end %>
          </ul>
        </nav>
    </header>
    <div class="logo"><%= link_to (foods_path) do%><img class="logo_img" src="/assets/uchiyamafarmlogo.png" alt=""><% end%></div>

    <div class="container">
      <%= yield %>
    </div>
    <footer>
      <ul class="menu">
        <li><%= link_to 'トップページ', foods_path %></li>
        <li><%= link_to '内山農園について', others_path %></li>
        <li><%= link_to 'お問い合わせ', new_contact_path %></li>
      </ul>
      <p class="copyright">
        &copy; Uchiyama Farm in Hosoe
      </p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  </body>
</html>

<script>

//スクロールをするとハンバーガーメニューに変化するための設定を関数でまとめる
$function FixedAnime() {
  //ヘッダーの高さを取得
  var headerH = $('#header').outerHeight(true);
  var scroll = $(window).scrollTop();
  if (scroll >= headerH) {//ヘッダーの高さ以上までスクロールしたら
    $('.openbtn1').addClass('fadeDown');//.openbtnにfadeDownというクラス名を付与して
    $('#header').addClass('dnone');//#headerにdnoneというクラス名を付与
  } else {//それ以外は
    $('.openbtn1').removeClass('fadeDown');//fadeDownというクラス名を除き
    $('#header').removeClass('dnone');//dnoneというクラス名を除く
  }
}

// 画面をスクロールをしたら動かしたい場合の記述
$(window).scroll(function () {
  FixedAnime();//スクロールをするとハンバーガーメニューに変化するための関数を呼ぶ
});

// ページが読み込まれたらすぐに動かしたい場合の記述
$(window).on('load', function () {
  FixedAnime();//スクロールをするとハンバーガーメニューに変化するための関数を呼ぶ
});


//ボタンをクリックした際のアニメーションの設定
$(".openbtn1").click(function () {//ボタンがクリックされたら
  $(this).toggleClass('active');//ボタン自身に activeクラスを付与し
  $("#header").toggleClass('panelactive');//ヘッダーにpanelactiveクラスを付与
});
$("#g-navi li a").click(function () {//ナビゲーションのリンクがクリックされたら
  $(".openbtn1").removeClass('active');//ボタンの activeクラスを除去し
  $("#header").removeClass('panelactive');//ヘッダーのpanelactiveクラスも除去
});


//リンク先のidまでスムーススクロール
//※ページ内リンクを行わない場合は不必要なので削除してください
$('#g-navi li a').click(function () {
  var elmHash = $(this).attr('href');
  var pos = $(elmHash).offset().top - 0;
  $('body,html').animate({ scrollTop: pos }, 1000);
  return false;
});

</script>